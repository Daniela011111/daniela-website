<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assignment 5 - Daniela Arocho</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Additional styles specific for spirograph inputs & canvas */
    main label {
      display: inline-block;
      width: 30px;
      font-weight: bold;
    }
    main input[type=number] {
      width: 60px;
      margin-right: 15px;
    }
    canvas {
      border: 1px solid black;
      display: block;
      margin: 20px 0;
      background-color: white;
    }
    #controls {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<nav>
  <ul class="menu">
    <li>My Classes
      <ul>
        <li><a href="#">Web Systems I_521F_FA25_ON - COP4813_521F_FA25</a></li>
        <li><a href="#">Business Writing_507A_FA25_ON - GEB3213_507A_FA25</a></li>
        <li><a href="#">Web Systems I_522F_FA25_ON - COP4813_522F_FA25</a></li>
        <li><a href="#">Operating Systems_521F_FA25_ON - COP4610_521F_FA25</a></li>
        <li><a href="#">Applied Cybersecurity_521F_FA25_ON - CIS4360_521F_FA25</a></li>
        <li><a href="#">Systems Integration_522F_FA25_ON - CEN4801_522F_FA25</a></li>
      </ul>
    </li>
    <li>My Assignments
      <ul>
        <li><a href="about.html">Assignment 1</a></li>
        <li><a href="assigment2.html">Assignment 2</a></li>
        <li><a href="assignment3.html">Assignment 3</a></li>
        <li><a href="assignment5.html">Assignment 5</a></li>
      </ul>
    </li>
    <li>My Favorite Sites
      <ul>
        <li><a href="https://w3schools.com" target="_blank" rel="noopener noreferrer">W3Schools</a></li>
        <li><a href="https://developer.mozilla.org" target="_blank" rel="noopener noreferrer">MDN</a></li>
      </ul>
    </li>
    <li>Programming Sites
      <ul>
        <li><a href="#">Site 1</a></li>
        <li><a href="#">Site 2</a></li>
      </ul>
    </li>
  </ul>
</nav>

<main>
  <h1>Assignment 5: Spirograph Generator</h1>

  <div id="controls">
    <label for="R">R:</label>
    <input type="number" id="R" value="100" min="10" max="200" />
    <label for="r">r:</label>
    <input type="number" id="r" value="30" min="5" max="100" />
    <label for="O">O:</label>
    <input type="number" id="O" value="50" min="0" max="100" />
    <button id="startBtn">Start Drawing</button>
  </div>

  <canvas id="canvas" width="600" height="600"></canvas>

  <!-- Back to Home link -->
  <a href="index.html" class="back-link">‚Üê Back to Home</a>
</main>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const startBtn = document.getElementById('startBtn');

  function resetCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.setTransform(1, 0, 0, 1, 0, 0); // reset transform first
    ctx.translate(canvas.width / 2, canvas.height / 2);
    ctx.strokeStyle = 'blue';
    ctx.lineWidth = 1;
    ctx.beginPath();
  }

  function clearAndReset() {
    ctx.setTransform(1, 0, 0, 1, 0, 0); // Reset transform
    resetCanvas();
  }

  function getParameters() {
    const R = parseFloat(document.getElementById('R').value);
    const r = parseFloat(document.getElementById('r').value);
    const O = parseFloat(document.getElementById('O').value);

    if (
      isNaN(R) || R < 10 || R > 200 ||
      isNaN(r) || r < 5 || r > 100 ||
      isNaN(O) || O < 0 || O > 100
    ) {
      alert('Please enter valid numbers:\nR: 10-200\nr: 5-100\nO: 0-100');
      return null;
    }
    return { R, r, O };
  }

  function gcd(a, b) {
    if (!b) return a;
    return gcd(b, a % b);
  }

  function drawSpirograph(R, r, O) {
    clearAndReset();

    let t = 0;
    const maxT = Math.PI * 2 * r / gcd(R, r);
    ctx.beginPath();

    function drawStep() {
      const x = (R + r) * Math.cos(t) - (r + O) * Math.cos(((R + r) / r) * t);
      const y = (R + r) * Math.sin(t) - (r + O) * Math.sin(((R + r) / r) * t);

      if (t === 0) {
        ctx.moveTo(x, y);
      } else {
        ctx.lineTo(x, y);
        ctx.stroke();
      }

      t += 0.01;

      if (t <= maxT) {
        requestAnimationFrame(drawStep);
      }
    }

    drawStep();
  }

  startBtn.addEventListener('click', () => {
    const params = getParameters();
    if (!params) return;
    drawSpirograph(params.R, params.r, params.O);
  });

  resetCanvas();
</script>

</body>
</html>
