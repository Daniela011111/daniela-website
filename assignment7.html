<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assignment 7 - Daniela Arocho</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    #dealButton {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #0077cc;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
    }
    #dealButton:hover {
      background-color: #005fa3;
    }
    #cardsContainer {
      margin: 20px auto;
      max-width: 900px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .card {
      width: 72px;
      height: 96px;
      cursor: grab;
      border-radius: 5px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      user-select: none;
    }
    #discardPile {
      margin: 30px auto;
      width: 150px;
      height: 120px;
      border: 3px dashed #0077cc;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0077cc;
      font-weight: bold;
      font-size: 18px;
    }
    #discardPile.dragover {
      background-color: #e0f0ff;
      border-color: #005fa3;
      color: #005fa3;
    }
  </style>
</head>
<body>

<main>
  <h1>Assignment 7: Drag and Drop Card Deck</h1>

  <button id="dealButton">Deal Cards</button>

  <div id="cardsContainer">
    <!-- Cards will be dealt here -->
  </div>

  <div id="discardPile">Discard Pile<br>Drop cards here</div>

  <a href="index.html" class="back-link">‚Üê Back to Home</a>
</main>

<script>
  const suits = ['S', 'H', 'D', 'C']; // Spades, Hearts, Diamonds, Clubs
  const ranks = [1,2,3,4,5,6,7,8,9,10,11,12,13]; // 1=Ace, 11=Jack, 12=Queen, 13=King

  const cardsContainer = document.getElementById('cardsContainer');
  const dealButton = document.getElementById('dealButton');
  const discardPile = document.getElementById('discardPile');

  // Updated card-to-image path based on your actual file names
  function cardToImagePath(card) {
    const suitNames = {
      S: 'spades',
      H: 'hearts',
      D: 'diamonds',
      C: 'clubs'
    };

    const rankNames = {
      1: 'ace',
      11: 'jack',
      12: 'queen',
      13: 'king'
    };

    const rank = rankNames[card.rank] || card.rank;
    const suit = suitNames[card.suit];

    return `images/${rank}_of_${suit}.png`;
  }

  function createCardElement(card) {
    const img = document.createElement('img');
    img.src = cardToImagePath(card);
    img.alt = `${card.suit}${card.rank}`;
    img.classList.add('card');
    img.draggable = true;
    img.id = `card-${card.suit}${card.rank}`;

    img.addEventListener('dragstart', (e) => {
      e.dataTransfer.setData('text/plain', img.id);
      e.dataTransfer.effectAllowed = 'move';
    });

    return img;
  }

  function createDeck() {
    const newDeck = [];
    for (const suit of suits) {
      for (const rank of ranks) {
        newDeck.push({suit, rank});
      }
    }
    return newDeck;
  }

  function shuffle(deck) {
    for (let i = deck.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [deck[i], deck[j]] = [deck[j], deck[i]];
    }
    return deck;
  }

  function clearCards() {
    cardsContainer.innerHTML = '';
  }

  function dealCards() {
    clearCards();
    let deck = shuffle(createDeck());
    for (const card of deck) {
      const cardEl = createCardElement(card);
      cardsContainer.appendChild(cardEl);
    }
  }

  // Deal on button click
  dealButton.addEventListener('click', () => {
    dealCards();
  });

  // Drag over discard pile
  discardPile.addEventListener('dragover', (e) => {
    e.preventDefault();
    discardPile.classList.add('dragover');
  });

  discardPile.addEventListener('dragleave', () => {
    discardPile.classList.remove('dragover');
  });

  // Drop on discard pile
  discardPile.addEventListener('drop', (e) => {
    e.preventDefault();
    discardPile.classList.remove('dragover');

    const cardId = e.dataTransfer.getData('text/plain');
    const cardEl = document.getElementById(cardId);
    if (cardEl) {
      alert(`Discarded card: ${cardEl.alt}`);
      cardEl.remove();
    }
  });
</script>

</body>
</html>
